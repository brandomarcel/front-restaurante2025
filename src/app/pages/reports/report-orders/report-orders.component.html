<div class="bg-primary-foreground p-3 space-y-4">
  <!-- Header -->
  <div class="app-page-header">
    <div>
      <h2 class="app-page-title">Ventas Generales</h2>
      <div class="app-page-subtle">Filtrado por fecha</div>
    </div>


    <app-button (click)="exportToExcel()" full impact="bold" tone="success" shape="rounded" size="medium">
      Descargar Excel
    </app-button>
  </div>
  <!-- Filtros -->

  <!-- Filtros -->
  <div class="toolbar">
    <div class="flex flex-col md:flex-row gap-3 md:items-end w-full">
      <div>
        <label class="block mb-1 font-medium">Desde</label>
        <input type="date" [(ngModel)]="filters.startDate" class="input" />
      </div>

      <div>
        <label class="block mb-1 font-medium">Hasta</label>
        <input type="date" [(ngModel)]="filters.endDate" class="input" />
      </div>

      <div>
        <app-button (click)="applyFilters()" full impact="bold" tone="info" shape="rounded" size="large">
          Buscar
        </app-button>
      </div>
    </div>
  </div>


  <ng-container *ngIf="orders.length > 0; else emptyOrders">
    <!-- Tabla -->
    <div class="overflow-auto rounded-lg shadow mt-4">
      <table class="min-w-full bg-white">
        <thead>
          <tr class="bg-gray-100 text-left text-sm font-medium text-gray-700">
            <th class="p-3">#</th>
            <th class="p-3">Cliente</th>
            <th class="p-3">Subtotal</th>
            <th class="p-3">IVA</th>
            <th class="p-3">Total</th>
            <th class="p-3">Fecha</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of orders" class="text-sm border-b">
            <td class="p-3">{{ order.id }}</td>
            <td class="p-3">{{ order.customerName }}</td>
            <td class="p-3">${{ order.subtotal | number:'1.2-2' }}</td>
            <td class="p-3">${{ order.iva | number:'1.2-2' }}</td>
            <td class="p-3">${{ order.total | number:'1.2-2' }}</td>
            <td class="p-3">{{ order.createdAt | date: 'short' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Resumen -->
    <div class="mt-6 border-t pt-4 text-sm text-gray-700">
      <h3 class="text-base font-semibold mb-2">Resumen de resultados:</h3>
      <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm">
        <div><strong>Total Ã³rdenes:</strong> {{ totalItems }}</div>
        <div><strong>Subtotal global:</strong> ${{ subtotalGlobal | number:'1.2-2' }}</div>
        <div><strong>Total global:</strong> ${{ totalGlobal | number:'1.2-2' }}</div>
      </div>
    </div>
  </ng-container>

  <ng-template #emptyOrders>
        <div class="app-card">
      <div class="app-card-body text-center text-gray-500">
        No se encontraron datos.
      </div>
    </div>
  </ng-template>
</div>